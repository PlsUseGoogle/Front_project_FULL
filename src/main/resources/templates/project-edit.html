<!DOCTYPE html>
<html lang="pl" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>Edycja projektu - Dziennik</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
<header>
    <div class="logo"><a th:href="${isAuthenticated} ? '/projektList' : '/index'">Dziennik</a></div>
    <nav>
        <ul>
            <li sec:authorize="hasRole('ADMIN')"><a href="/studentList">Studenci</a></li>
            <li sec:authorize="hasRole('USER')"><a href="/studentProfile">Moje dane</a></li>
            <li sec:authorize="isAuthenticated()"><a th:href="@{/zadanieList}">Zadania</a></li>
            <li sec:authorize="isAuthenticated()"><a th:href="@{/projektList}">Projekty</a></li>
            <li sec:authorize="isAuthenticated()"><a href="/logout" class="btn-light">Wyloguj</a></li>
        </ul>
    </nav>
</header>

<section>
    <h1>Edycja projektu</h1>
    <div class="form-container">
        <form th:action="@{/projektEdit}" th:object="${projekt}" method="post">
            <div style="display: flex; gap: 20px; margin-bottom: 20px;">
                <div style="flex: 1;">
                    <label>Id:</label>
                    <input type="text" th:field="*{projektId}" readonly style="background:#f0f0f0;">
                </div>
                <div style="flex: 2;">
                    <label>Nazwa:</label>
                    <input type="text" th:field="*{nazwa}" required>
                </div>
            </div>

            <div style="display: flex; gap: 20px; margin-bottom: 20px;">
                <div style="flex: 2;">
                    <label>Opis:</label>
                    <textarea th:field="*{opis}" rows="4" required></textarea>
                </div>
                <div style="flex: 1;">
                    <label>Data oddania:</label>
                    <input type="date" th:field="*{dataOddania}" required>
                </div>
            </div>

            <div style="margin-bottom: 30px;">
                <label>Utworzony:</label>
                <input type="text" th:value="${projekt.dataCzasUtworzenia != null ? #temporals.format(projekt.dataCzasUtworzenia, 'dd-MM-yyyy HH:mm') : ''}" readonly style="background:#f0f0f0;">
                <p style="font-size: 12px; color: #666; margin-top: 6px;">
                    Data i czas utworzenia rekordu w systemie (ustawiane automatycznie).
                </p>
            </div>

            <div style="text-align: center;">
                <button type="submit" class="btn-green">Zapisz</button>
                <a th:href="@{/projektList}" class="btn-light" style="margin-left: 15px;">Anuluj</a>
            </div>
        </form>
    </div>
</section>
<script th:src="@{/js/script.js}"></script>
</body>
</html>
